2.17 . 4 . 20

至今 项目上线已经接近一月

项目中 使用了 第三方提供的一些技术

不乏 微信支付,友盟统计,极光推送.

在集成时 遇到了很多小问题 导致了 耗费了一定的时间来处理 ，在这里 写下处理心得。

微信支付.

大多数逻辑在服务器端,android只需要 执行 吊起支付 接口来唤醒微信处理支付订单.

这里就有一个小坑了, 微信支付每次支付时都会去检查 你在开放平台的appAndroid后台里设置的签名，来确定

你是唯一的,否则不响应。后台里的签名是 根据应用包名和应用的store密匙来生成的加密码. 可以通过下载

官方提供的apk,安装到手机上,同时把你的正式签过名的包也要安装,然后 打开官方的apk,输入你的app包名,

点击获取签名(翻译过)然后一字不差的输入到微信开放平台的签名里.待3分钟左右,即可调用成功.-1就解决了.

个别时候如果是签名正确,还有极个别用户无法调用的话,切换账户之类的操作后，即可支付.a


极光推送

至于极光推送正常集成 所有的权限不能少,所有标注required的不能删除,对了,极光留了一个广播给开发者

来处理推送过来的所有通知，都可以从此广播中截取，然后进行特殊操作.

其他的没有任何问题,但是 实际使用后 会发现有时 注册别名的操作会不成功.

经过仔细处理后 发现,推送状态有3个生命周期, onstart  , onstop , onresume.

如果把推送 置为onstop的话，再次调用onstart 是无效的,需要用onresume来解锁，同理，在onstop状态下

设置别名会被极光拒绝.判断下当前的极光的生命周期，再执行即可解决。


友盟统计

基于Android多市场的因素,需要大批量多渠道来统计,所以选择了友盟。

在渠道的处理上,在友盟后台看了很久才发现,渠道的意思就是 在app中配置的 自定义ID,及姓名来区分.

然后在apk安装时 此渠道会被友盟统计到 然后自动添加至后台中存在。

介于android studio的恐怖打包速度,利用了第三方以安全出名的360加固助手,顺便把app给多渠道打包。

使用加固时 就算是签过名的正式包也要在360加固中签名不然会出现 无法解析的错误。

所有的渠道依次添加至配置中即可.可以导出备份,亦可快速导入。

所有渠道谨记备份。